# STEM Test Cases

This repository contains test cases for railway induced vibrations modelled with [STEM](https://github.com/stemVibrations/stem).

## Intructions

In order to run the test cases, you need to have STEM installed.
You can find the installation instructions in the [STEM documentation](https://stemvibrations.readthedocs.io/v1.2/#stem-installation).
In the test cases, the STEM version 1.2 is used.

For the test cases you also need to have [git](https://git-scm.com/) installed, in order to commit the results.


### Running the test cases

To run the test cases, you can download the example [python script](inputs/example_stem.py) and edit
according to your test case needs.

### Committing the results

Once you have run the STEM model, you can upload the results to this repository.
To do this you need to create a new branch with the name of your test case, e.g. `test_case_number`.
Then you can commit the results to this branch in the folder [data](/data) and create a pull request.
If the results are not in the `data` folder, they won't be processed.

To commit the results you need to prepare the test case yaml file, e.g. `test_case_number.yaml` file:
This yaml file must follow this structure:

```yaml
organisation: Organization Name
title: Test Case Title
test-description: >
  The description of the test case goes here.
date: 2025-06-23
json-file: json_output_file_name.json
input-file: input_file_name.py
STEM-version: 1.2
```

The `organisation` and `title` are self-explanatory.
The `test-description` field should contain a description of the test case. This can be a few sentences or a longer description.
The `date` field should contain the date of the test case in the format `YYYY-MM-DD`.
The `json-file` field should contain the name of the JSON file with the results of the test case. This is a file generated by the STEM model, which contains the results of the test case in JSON format.
The `input-file` field should contain the name of the input file used to run the test case.
The `STEM-version` field should contain the version of STEM. In priciple this should be 1.2.

You can find an example of the yaml file [here](inputs/example_yaml.yaml).
Please make sure to replace the fields with your own values. Before committing the yaml file, please make sure that the `json-file` and `input-file` fields match the names of the files you are committing, and validate the yaml file.
You can validate your yaml file [here](https://www.yamllint.com/).

You then need to commit the yaml file, JSON file and input file to the repository, in your branch and create a pull request.

To create a branch and commit the files you can use the following commands (please replace `test_case_number`, `json_output_file_name.json`, and `input_file_name.py` with your own values):

```bash
git checkout -b test_case_number
git add test_case_number.yaml json_output_file_name.json input_file_name.py
git commit -m "Add test case number"
git push origin test_case_number
```

To create a pull request, you can go to the [GitHub repository](https://github.com/StemVibrations/TestCases)
and click on the "Pull requests" tab.
Then click on the "New pull request" button and select your branch.

Once you have created the pull request, you need to make sure that the pull request is valid, and the workflow is successful.
You can check the status of the workflow in the "Actions" tab of the repository.

Here an example: of how the actions tab looks like:

![Actions Tab](/static/actions.png).

### Visualizing the results
Once the pull request is merged, the results will be processed and visualized in the [Test cases webpage](https://stemvibrations.github.io/TestCases/).

You can find all the results in the [results page](https://stemvibrations.github.io/TestCases/results), and a summary of the results in the [summary page](https://stemvibrations.github.io/TestCases/summary).


## Exploring the results

If you want to explore the results of the test cases, you can download them from the [data folder](/data).
You can use some of the [available scripts](scripts/process_data.py) to process the results and visualize them,
or you can use your own scripts to process and visualise the data.

